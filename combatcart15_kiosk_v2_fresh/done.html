<!doctype html>
<html lang="de">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover"/>
  <title>CombatCart 15 – Bestätigung</title>
  <link rel="stylesheet" href="styles.css"/>
</head>
<body>
  <div class="container">
    <div class="topbar">
      <div class="brand" style="cursor:pointer" onclick="CC15.goto('index.html')">
        <img src="assets/logo.png" alt="CombatCart 15"/>
        <div class="title">
          <div class="h1">COMBATCART 15</div>
          <div class="h2">Tactical Mobile Supply</div>
        </div>
      </div>
      <div class="pill lang">
        <button data-lang="de" class="active">DE</button>
        <button data-lang="fr">FR</button>
      </div>
    </div>

    <div class="page">
      <div class="card">
        <h1 data-i18n="confirm">Bestätigung</h1>

        <div style="font-weight:950; letter-spacing:.04em; margin-bottom:8px;">
          <span data-i18n="orderNo">Bestellnummer</span>: <span id="orderId">—</span>
        </div>

        <div class="muted" id="summary"></div>

        <div class="row" style="margin-top:12px;">
          <button class="btn" id="btnNew" data-i18n="newOrder">Neue Bestellung</button>
        </div>
      </div>
    </div>
  </div>

<script src="app.js"></script>
<script>
function getOrder(){
  try{ return JSON.parse(localStorage.getItem(CC15.STORAGE_KEYS.order)||'null'); }catch{return null}
}
function render(){
  CC15.initCommon();
  const order=getOrder();
  if(!order){ CC15.goto('index.html'); return; }

  document.getElementById('orderId').textContent = order.id;

  const loc = (order.location==='corb') ? (CC15.getLang()==='fr' ? 'Corbières' : 'Corbières') : (CC15.getLang()==='fr' ? 'AZH Romont' : 'AZH Romont');
  const lines = [
    (CC15.getLang()==='fr' ? `Client: ${order.firstname} ${order.name}` : `Kunde: ${order.firstname} ${order.name}`),
    (CC15.getLang()==='fr' ? `Mobile: ${order.phone}` : `Handy: ${order.phone}`),
    (CC15.getLang()==='fr' ? `Lieu: ${loc}` : `Ort: ${loc}`),
    (CC15.getLang()==='fr' ? `Créneau: ${order.time}` : `Zeitfenster: ${order.time}`),
    (CC15.getLang()==='fr' ? `Total: ${CC15.money(order.total)} CHF` : `Total: ${CC15.money(order.total)} CHF`)
  ];
  document.getElementById('summary').innerHTML = lines.map(x=>`• ${x}`).join('<br/>');

  document.getElementById('btnNew').onclick=()=>{
    // reset cart for a new order
    CC15.setCart([]);
    localStorage.removeItem(CC15.STORAGE_KEYS.order);
    CC15.goto('index.html');
  };

  CC15.syncHeader();
}
window.renderPage = render;
render();
</script>
</body>
</html>
