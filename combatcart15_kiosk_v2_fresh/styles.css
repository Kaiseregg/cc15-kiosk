/* CombatCart 15 – Kiosk Mode (static / no-npm)
   Goal: feels like standing in front of the real machine.
*/

html,body{height:100%;margin:0;overscroll-behavior:none}
*{box-sizing:border-box}
body{
  background: #000;
  color:#e9efe9;
  font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial;
  overflow:hidden;
  /* reduce iOS/Android "rubber band" scroll */
  touch-action:manipulation;
}

.container{
  height:100svh;
  display:flex;
  flex-direction:column;
  align-items:center;
  justify-content:flex-start;
  gap:10px;
  padding: 10px 12px 12px;
  position:relative;
}

/* Minimal header */
.topbar{
  width:min(980px, 100%);
  display:flex;
  align-items:center;
  justify-content:space-between;
  gap:12px;
  padding: 6px 8px;
}
.brand{display:flex;align-items:center;gap:10px}
.brand img{width:34px;height:34px;border-radius:10px;filter:drop-shadow(0 8px 18px rgba(0,0,0,.55))}
.title{display:flex;flex-direction:column;line-height:1.05}
.title .h1{font-weight:950;letter-spacing:.06em;font-size:14px}
.title .h2{font-size:11px;opacity:.8;letter-spacing:.10em}

.pill{display:flex;border-radius:999px;padding:3px;background:rgba(255,255,255,.05);border:1px solid rgba(255,255,255,.08)}
.pill button{background:transparent;border:0;color:#e9efe9;padding:7px 10px;border-radius:999px;cursor:pointer;font-weight:900;letter-spacing:.04em;opacity:.7}
.pill button.active{background:rgba(229,199,79,.14);opacity:1;border:1px solid rgba(229,199,79,.25)}

/* Machine stage: always fully visible */
.automatonWrap{width:min(980px,100%);flex:1;display:flex;align-items:center;justify-content:center;position:relative}
.machineStage{
  position:relative;
  /* Height is driven by JS to ensure the whole machine always fits (no scroll/zoom mismatch). */
  height: var(--machine-h, min(calc(100svh - 92px), 1480px));
  aspect-ratio: 1108 / 2048;
  width: auto;
  max-width: 96vw;
  border-radius:18px;
  overflow:hidden;
  box-shadow: 0 24px 80px rgba(0,0,0,.60);
  border: 1px solid rgba(255,255,255,.10);
}
.machineStage img{width:100%;height:100%;object-fit:contain;display:block}

/* Slot overlays – pixel-matched to white panels */
.slot{
  position:absolute;
  border-radius:10px;
  overflow:hidden;
  cursor:pointer;
  background:rgba(0,0,0,0);
  outline:1px solid rgba(255,255,255,.06);
  transition: transform .08s ease, outline-color .15s ease, box-shadow .15s ease;
}
.slot:hover{transform:translateY(-1px);outline-color:rgba(229,199,79,.35);box-shadow:0 10px 30px rgba(229,199,79,.12)}
.slot img{width:100%;height:100%;object-fit:cover;display:block}

.slot.empty{background:rgba(18,22,21,.45);outline-color:rgba(255,255,255,.05)}
.slot.empty::after{
  content:"EMPTY";
  position:absolute;inset:0;
  display:flex;align-items:center;justify-content:center;
  font-size:10px;letter-spacing:.22em;font-weight:950;opacity:.28;
  color:#e9efe9;
  text-shadow:0 2px 10px rgba(0,0,0,.55);
}

/* Basket cart button */
.basketBtn{
  position:absolute;
  /* aligned to the black basket rectangle */
  left: 16.5%;
  top: 73.6%;
  width: 66.5%;
  height: 11.6%;
  border:0;
  background:rgba(0,0,0,0);
  cursor:pointer;
}
.basketBtn:focus{outline:2px solid rgba(229,199,79,.40);outline-offset:4px;border-radius:14px}

.basketBtn .basketBadge{
  position:absolute;
  /* Count inside the black basket rectangle, close to the icon */
  left: calc(74% - 8px);
  top: 54%;
  transform: translate(-50%, -50%);
  min-width: 52px;
  height: 52px;
  padding: 0 12px;
  border-radius: 999px;
  background:#e5c74f;
  color:#0b0f0e;
  font-weight:950;
  font-size: 20px;
  display:flex;
  align-items:center;
  justify-content:center;
  box-shadow: 0 6px 18px rgba(0,0,0,.35);
  pointer-events:none;
}
.basketBtn .basketBadge.hidden{ display:none; }




/* Generic pages: allow content scroll inside card (body stays fixed) */
.page{overflow:auto}
.card{max-height: calc(100svh - 92px); overflow:auto}

/* Fullscreen helper */
.fsHint{position:fixed;inset:0;display:none;align-items:flex-end;justify-content:center;padding:18px;background:linear-gradient(180deg, rgba(0,0,0,0) 35%, rgba(0,0,0,.65) 100%)}
.fsHint.show{display:flex}
.fsCard{width:min(520px,92vw);border-radius:18px;padding:14px 14px 12px;background:rgba(10,14,12,.72);border:1px solid rgba(255,255,255,.10);backdrop-filter:blur(14px)}
.fsCard .big{font-weight:950;letter-spacing:.04em}
.fsCard .small{opacity:.8;font-size:12px;margin-top:6px;line-height:1.3}
.fsCard .btn{margin-top:10px;width:100%;padding:10px 12px;border-radius:14px;border:1px solid rgba(229,199,79,.25);background:rgba(229,199,79,.14);color:#e9efe9;font-weight:950;cursor:pointer}

/* Generic pages */
.page{width:min(980px,100%);flex:1;display:flex;align-items:stretch;justify-content:center}
.card{width:min(720px,100%);background:rgba(10,14,12,.62);border:1px solid rgba(255,255,255,.10);border-radius:18px;padding:14px;backdrop-filter:blur(14px)}
.card h1{margin:0 0 10px;font-size:18px;letter-spacing:.04em}
.muted{opacity:.8;font-size:12px}
.row{display:flex;gap:10px;flex-wrap:wrap}
.btn{cursor:pointer;border-radius:14px;padding:10px 12px;border:1px solid rgba(255,255,255,.12);background:rgba(255,255,255,.06);color:#e9efe9;font-weight:900}
.btn.primary{border-color:rgba(229,199,79,.25);background:rgba(229,199,79,.14)}
.btn.danger{border-color:rgba(255,90,90,.25);background:rgba(255,90,90,.10)}
.list{display:flex;flex-direction:column;gap:10px}
.item{display:flex;gap:10px;align-items:center;padding:10px;border-radius:16px;border:1px solid rgba(255,255,255,.10);background:rgba(255,255,255,.04)}
.item img{width:54px;height:54px;border-radius:12px;object-fit:cover}
.grow{flex:1}
.qty{display:flex;align-items:center;gap:6px}
.qty button{width:34px;height:34px;border-radius:10px;border:1px solid rgba(255,255,255,.12);background:rgba(255,255,255,.06);color:#e9efe9;font-weight:950;cursor:pointer}
.qty span{min-width:16px;text-align:center;font-weight:950}
.field{display:flex;flex-direction:column;gap:6px;margin:10px 0}
.field label{font-weight:900;font-size:12px;opacity:.9}
.field input,.field select{padding:10px 12px;border-radius:14px;border:1px solid rgba(255,255,255,.12);background:rgba(0,0,0,.15);color:#e9efe9}
.codebox{padding:12px 14px;border:1px dashed rgba(255,255,255,.22);border-radius:16px;background:rgba(0,0,0,.18);font-weight:950;letter-spacing:.04em}

/* Modal (product overlay) */
.modal{position:fixed;inset:0;background:rgba(0,0,0,.72);display:none;align-items:center;justify-content:center;padding:18px;z-index:50}
.modal.open{display:flex}
.modalCard{width:min(860px,100%);background:rgba(10,14,12,.88);border:1px solid rgba(255,255,255,.12);border-radius:22px;overflow:hidden;box-shadow:0 18px 60px rgba(0,0,0,.65)}
.modalTop{display:flex;align-items:center;justify-content:space-between;padding:14px}
.modalTop .name{font-weight:950;letter-spacing:.06em;text-transform:uppercase;font-size:14px}
.closeX{border:1px solid rgba(255,255,255,.12);background:rgba(255,255,255,.06);color:#e9efe9;width:42px;height:42px;border-radius:14px;cursor:pointer}
.modalBody{display:grid;grid-template-columns:1.3fr 1fr;border-top:1px solid rgba(255,255,255,.10)}
@media (max-width:820px){.modalBody{grid-template-columns:1fr}}
.modalImg{background:#0b0f0e;min-height:320px}
.modalImg img{width:100%;height:100%;object-fit:contain;display:block;padding:12px}
.modalSide{padding:16px;display:flex;flex-direction:column;gap:12px}
.price{font-size:20px;font-weight:950}
.step{display:flex;align-items:center;border:1px solid rgba(255,255,255,.12);border-radius:14px;overflow:hidden}
.step button{width:44px;height:42px;border:0;background:rgba(255,255,255,.06);color:#e9efe9;font-size:18px;cursor:pointer}
.step span{width:54px;display:flex;align-items:center;justify-content:center;font-weight:950}
.primary{border:1px solid rgba(229,199,79,.25);background:rgba(229,199,79,.14);color:#e9efe9;border-radius:16px;padding:14px 14px;font-weight:950;letter-spacing:.06em;cursor:pointer}
.secondary{border:1px solid rgba(255,255,255,.12);background:rgba(255,255,255,.06);color:#e9efe9;border-radius:16px;padding:12px 14px;font-weight:900;cursor:pointer}



@keyframes badgePop{0%{transform:translate(-50%,-50%) scale(1)}40%{transform:translate(-50%,-50%) scale(1.25)}100%{transform:translate(-50%,-50%) scale(1)}}
.basketBadge.pop{animation:badgePop .28s ease-out}

.toast{position:fixed;left:50%;bottom:26px;transform:translateX(-50%);background:rgba(15,19,18,.92);border:1px solid rgba(255,255,255,.12);padding:10px 14px;border-radius:14px;box-shadow:0 18px 50px rgba(0,0,0,.55);font-weight:850;letter-spacing:.02em;opacity:0;pointer-events:none;transition:opacity .18s ease, transform .18s ease;z-index:9999}
.toast.show{opacity:1;transform:translateX(-50%) translateY(-6px)}
.toast .ok{display:inline-flex;align-items:center;justify-content:center;width:18px;height:18px;border-radius:999px;background:#2ecc71;color:#0b0f0e;font-size:12px;margin-right:8px}

@media (min-width: 900px){
  body{overflow:auto;}
  .container{height:auto;min-height:100vh; padding:18px 18px 24px;}
  /* Desktop: logo/brand should sit ABOVE the machine like on mobile */
  .topbar{width:min(1200px, 100%); justify-content:center; padding-top:10px;}
  .pill.lang{position:absolute; right:18px; top:18px;}
  .automatonWrap{width:min(1200px, 100%);}
  .machineStage{max-width: min(1200px, 92vw);}
}
